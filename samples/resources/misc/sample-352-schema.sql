DROP TABLE ULTRAESB.MESSAGE;

DROP TABLE ULTRAESB.PARTNER;

CREATE TABLE ULTRAESB.MESSAGE (
	MESSAGEUKEY            	BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1, INCREMENT BY 1) NOT NULL,
	MDNPENDING             	SMALLINT,
	AS2MESSAGEID           	VARCHAR(255) NOT NULL,
	COMPRESSED             	SMALLINT,
	CONTAINSPAYLOAD        	SMALLINT,
	CONTENTMIC             	VARCHAR(255),
	DATE                   	TIMESTAMP,
	ENCRYPTED              	SMALLINT,
	INCOMING               	SMALLINT,
	RAWFILEPATH            	VARCHAR(255),
	RAWHEADERSPATH         	VARCHAR(255),
	RECEIVERID             	VARCHAR(255),
	RELATEDMESSAGEID       	VARCHAR(255),
	SENDFAILED             	SMALLINT,
	SENDERID               	VARCHAR(255),
	SIGNED                 	SMALLINT,
	TRANSPORTSTATUSRECEIVED	INTEGER,
	USERAGENT              	VARCHAR(255),
	CONSTRAINT SQL120104114337631 PRIMARY KEY(MESSAGEUKEY)
);

CREATE TABLE ULTRAESB.PARTNER (
	PARTNERUKEY     	BIGINT GENERATED ALWAYS AS IDENTITY(START WITH 1, INCREMENT BY 1) NOT NULL,
	AS2IDENTIFIER   	VARCHAR(255) NOT NULL,
	ASYNCRECEIPTURL 	VARCHAR(255),
	COMPRESSAFTER   	SMALLINT,
	COMPRESSBEFORE  	SMALLINT,
	DESCRIPTION     	VARCHAR(255),
	ENCRYPTCERTALIAS	VARCHAR(255),
	ENCRYPTMESSAGES 	SMALLINT,
	MESSAGESUBJECT  	VARCHAR(255),
	NAME            	VARCHAR(255) NOT NULL,
	REQUESTASYNCMDN 	SMALLINT,
	REQUESTMDN      	SMALLINT,
	REQUESTSIGNEDMDN	SMALLINT,
	SIGNMESSAGES    	SMALLINT,
	URL             	VARCHAR(255),
	CONSTRAINT SQL120104114337971 PRIMARY KEY(PARTNERUKEY)
);


ALTER TABLE ULTRAESB.MESSAGE
	ADD CONSTRAINT SQL120104114337630
	 UNIQUE (AS2MESSAGEID) ;

ALTER TABLE ULTRAESB.PARTNER
	ADD CONSTRAINT SQL120104114337970
	 UNIQUE (AS2IDENTIFIER) ;

INSERT INTO ULTRAESB.PARTNER (NAME, AS2IDENTIFIER, ENCRYPTCERTALIAS,
    REQUESTMDN, REQUESTSIGNEDMDN, SIGNMESSAGES, ENCRYPTMESSAGES, COMPRESSAFTER, COMPRESSBEFORE, REQUESTASYNCMDN,
    URL) VALUES ('mendelson', 'mendelson', 'server2', 1, 1, 1, 1, 0, 0, 0, 'http://localhost:8080/as2/HttpReceiver');